import{_ as P,i as M,a as G,b as j,c as U,g as z,t as h,s as x,h as g,v as H,d as K,r as _,o as u,e as c,f as t,j as r,w,F as v,k as R,l as m,m as J,n as y,p as f,q as C,u as Q}from"./inputSelect-iyL7CFYm.js";import{a as B}from"./axios-OMshwncm.js";import{i as W}from"./inputSelect2-lGZPlumr.js";const X={components:{inputDate:M,inputText:G,inputSelect:j,inputSelect2:W},mounted:async function(){document.getElementById("menu-item-admins").classList.add("active"),await this.initParams({}),await this.initOthers({}),await this.listAdmins({}),U()},data(){return{lists:{admins:{filters:{general:""},records:{total:0}}},forms:{admins:{add:{modals:{default:"addAdminModal"},select2:{branches:"branchesSelect2"},data:{type_document:"",number_document:"",last_name:"",first_name:"",email:"",password:"",birth_date:"",gender:"",phone:"",status:"",branches:[]},options:{type_document:[{code:"dni",label:"DNI"}],gender:[{code:"male",label:"Masculino"},{code:"female",label:"Femenino"},{code:"other",label:"Otro"}],status:[{code:"active",label:"Activo"},{code:"inactive",label:"Inactivo"}],branches:[]},errors:{}}}},generalConfiguration:z}},methods:{initParams({}){return new Promise(d=>{let s=`${y}/admins/initParams`,o={},n={};o.params=n,B.get(s,o).then(e=>{let i=e.data.branches;this.forms.admins.add.options.branches=i.map(l=>({code:l.id,label:l.name}))}).catch(e=>{h({subtitle:e,type:"error"})}).finally(()=>{d(!0)})})},initOthers({}){return new Promise(d=>{let s=this;$(`#${s.forms.admins.add.select2.branches}`).on("select2:select",function(o){let n=o.params.data;s.forms.admins.add.data.branches.filter(e=>e.toString()==n.id.toString()).length===0&&s.forms.admins.add.data.branches.push(n.id)}),$(`#${s.forms.admins.add.select2.branches}`).on("select2:unselect",function(o){let n=o.params.data;s.forms.admins.add.data.branches=s.forms.admins.add.data.branches.filter(e=>e.toString()!==n.id.toString())}),d(!0)})},listAdmins({url:d=null}){return new Promise(s=>{x({type:"list"});let o=d||`${y}/admins/list`,n={},e={};e.general=this.lists.admins.filters.general,n.params=e,B.get(o,n).then(i=>{this.lists.admins.records=i.data}).catch(i=>{h({subtitle:i,type:"error"})}).finally(()=>{g(),U(),s(!0)})})},createAdmin(){let d="createAdmin";x({type:"saveForm"}),this.clearFormErrors({functionName:d});let s=`${y}/admins`,o={};o.type_document=this.forms.admins.add.data.type_document,o.number_document=this.forms.admins.add.data.number_document,o.last_name=this.forms.admins.add.data.last_name,o.first_name=this.forms.admins.add.data.first_name,o.email=this.forms.admins.add.data.email,o.password=this.forms.admins.add.data.password,o.birth_date=this.forms.admins.add.data.birth_date,o.gender=this.forms.admins.add.data.gender,o.phone=this.forms.admins.add.data.phone,o.status=this.forms.admins.add.data.status,o.branches=this.forms.admins.add.data.branches,B.post(s,o).then(n=>{switch(n.status){case 200:this.clearForm({functionName:d}),h({subtitle:n.data.message,type:"success"});break}}).catch(n=>{switch(n.response.status){case 422:this.setFormErrors({functionName:d,errors:n.response.data.errors}),h({code:n.response.status,type:"error"});break}}).finally(()=>{g()})},clearForm({functionName:d}){switch(d){case"createAdmin":this.forms.admins.add.data.type_document="",this.forms.admins.add.data.number_document="",this.forms.admins.add.data.last_name="",this.forms.admins.add.data.first_name="",this.forms.admins.add.data.email="",this.forms.admins.add.data.password="",this.forms.admins.add.data.birth_date="",this.forms.admins.add.data.gender="",this.forms.admins.add.data.phone="",this.forms.admins.add.data.status="",this.forms.admins.add.data.branches=[],$(`#${this.forms.admins.add.select2.branches}`).val(null).trigger("change");break}},clearFormErrors({functionName:d}){switch(d){case"createAdmin":let s=Object.keys(this.forms.admins.add.errors);for(const o of s)this.forms.admins.add.errors[o]=[];break}},setFormErrors({functionName:d,errors:s=[]}){switch(d){case"createAdmin":this.forms.admins.add.errors.type_document=s.type_document??[],this.forms.admins.add.errors.number_document=s.number_document??[],this.forms.admins.add.errors.last_name=s.last_name??[],this.forms.admins.add.errors.first_name=s.first_name??[],this.forms.admins.add.errors.email=s.email??[],this.forms.admins.add.errors.password=s.password??[],this.forms.admins.add.errors.birth_date=s.birth_date??[],this.forms.admins.add.errors.gender=s.gender??[],this.forms.admins.add.errors.phone=s.phone??[],this.forms.admins.add.errors.status=s.status??[],this.forms.admins.add.errors.branches=s.branches??[];break}},validateVariable({value:d}){return H({value:d})},async consultNumberDocument({functionName:d,numberDocument:s,type:o}){var n,e,i;switch(d){case"createAdmin":x({type:"externalConsult"});let l=await K({numberDocument:s,type:o});l.bool&&(this.forms.admins.add.data.number_document=(n=l.data)==null?void 0:n.number_document,this.forms.admins.add.data.last_name=(e=l.data)==null?void 0:e.last_name,this.forms.admins.add.data.first_name=(i=l.data)==null?void 0:i.first_name),g();break}}}},Y=t("h4",{class:"py-2 mb-4"},[t("span",{class:"text-muted fw-light"},[t("i",{class:"fa fa-home fa-2xs"}),f(" / ")]),t("span",{class:"text-uppercase"}," COLABORADORES ")],-1),Z={class:"d-flex flex-row mb-4"},tt={class:"align-self-start"},et=t("i",{class:"fa fa-info-circle","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Búsqueda por: Número de documento, Apellidos, Nombres.",role:"button"},null,-1),st=t("i",{class:"fa fa-search"},null,-1),at=[st],ot={class:"align-self-end ms-3"},dt=["data-bs-target"],nt=t("i",{class:"fa fa-plus"},null,-1),it=t("span",{class:"ms-1"},"Agregar",-1),lt=[nt,it],rt={class:"card"},mt={class:"table-responsive text-nowrap"},ut={class:"table table-hover"},ct=t("thead",{class:"table-light"},[t("tr",{class:"text-uppercase"},[t("th",{class:"align-middle text-center fw-bold col-1"},[f("TIPO DE"),t("br"),f("DOCUMENTO")]),t("th",{class:"align-middle text-center fw-bold col-1"},[f("NÚMERO DE"),t("br"),f("DOCUMENTO")]),t("th",{class:"align-middle text-center fw-bold col-2"},"APELLIDOS"),t("th",{class:"align-middle text-center fw-bold col-2"},"NOMBRES"),t("th",{class:"align-middle text-center fw-bold col-1"},[f("CORREO"),t("br"),f("ELECTRÓNICO")]),t("th",{class:"align-middle text-center fw-bold col-1",colspan:"2"},"FECHA DE NACIMIENTO"),t("th",{class:"align-middle text-center fw-bold col-1"},"GÉNERO"),t("th",{class:"align-middle text-center fw-bold col-1"},"ESTADO")])],-1),ft={class:"table-border-bottom-0"},ht=["textContent"],_t=["textContent"],pt=["textContent"],bt=["textContent"],xt=["textContent"],gt=["textContent"],wt={class:"text-start"},vt={class:"badge rounded-pill bg-label-info"},yt={class:"text-center"},Ct=["textContent"],Bt={class:"text-center"},Vt=["textContent"],At={key:1},Dt=["textContent"],It={class:"d-flex justify-content-center"},Et={key:0,"aria-label":"Page navigation",class:"mt-3"},Tt={class:"pagination d-flex flex-wrap"},Ot=["onClick","innerHTML"],Nt=["id"],qt={class:"modal-dialog modal-dialog-centered",role:"document"},kt={class:"modal-content"},St=t("div",{class:"modal-header"},[t("h5",{class:"modal-title text-uppercase"},"AGREGAR COLABORADOR"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ut={class:"modal-body"},Rt={class:"row g-2 mb-3"},Ft=["disabled"],Lt=t("i",{class:"fa fa-search"},null,-1),Pt=[Lt],Mt={class:"row g-2 mb-3"},Gt={class:"row g-2 mb-3"},jt={class:"row g-2 mb-3"},zt={class:"row g-2 mb-3"},Ht={class:"row g-2 mb-3"},Kt={class:"modal-footer"},Jt=t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"Cerrar",-1),Qt=t("i",{class:"fa fa-save"},null,-1),Wt=t("span",{class:"ms-1"},"Guardar",-1),Xt=[Qt,Wt];function Yt(d,s,o,n,e,i){var V,A,D,I,E,T,O,N,q,k,S;const l=_("inputText"),p=_("inputSelect"),F=_("inputDate"),L=_("inputSelect2");return u(),c(v,null,[Y,t("div",Z,[t("div",tt,[r(l,{modelValue:e.lists.admins.filters.general,"onUpdate:modelValue":s[1]||(s[1]=a=>e.lists.admins.filters.general=a),showDiv:!0,title:"Buscar",titleClass:["fw-bold","colon-at-end","ms-1"],placeholder:"Ingrese la búsqueda",onEnterKeyPressed:s[2]||(s[2]=a=>i.listAdmins({}))},{default:w(()=>[et]),inputGroupAppend:w(()=>[t("button",{class:"btn btn-primary waves-effect",type:"button",onClick:s[0]||(s[0]=a=>i.listAdmins({}))},at)]),_:1},8,["modelValue"])]),t("div",ot,[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":`#${e.forms.admins.add.modals.default}`},lt,8,dt)])]),t("div",rt,[t("div",mt,[t("table",ut,[ct,t("tbody",ft,[e.lists.admins.records.data&&e.lists.admins.records.data.length>0?(u(!0),c(v,{key:0},R(e.lists.admins.records.data,a=>{var b;return u(),c("tr",{key:a.id,class:"align-middle"},[t("td",{class:"text-center text-uppercase",textContent:m(a.formatted_type_document)},null,8,ht),t("td",{class:"text-center",textContent:m(a.number_document)},null,8,_t),t("td",{class:"text-center",textContent:m(a.last_name)},null,8,pt),t("td",{class:"text-center",textContent:m(a.first_name)},null,8,bt),t("td",{class:"text-center",textContent:m((b=a==null?void 0:a.user)==null?void 0:b.email)},null,8,xt),t("td",{class:"text-center",textContent:m(a.formatted_birth_date)},null,8,gt),t("td",wt,[t("span",vt,m(a.age)+" años",1)]),t("td",yt,[t("i",{class:C(["fa",{"fa-male text-info":["male"].includes(a.gender),"fa-female text-danger":["female"].includes(a.gender),"fa-person-half-dress text-warning":["other"].includes(a.gender)}])},null,2),t("span",{textContent:m(a.formatted_gender),class:"text-capitalize ms-1"},null,8,Ct)]),t("td",Bt,[t("span",{class:C(["badge","text-capitalize",{"bg-label-success":["active"].includes(a.status),"bg-label-danger":["inactive"].includes(a.status)}]),textContent:m(a.formatted_status)},null,10,Vt)])])}),128)):(u(),c("tr",At,[t("td",{class:"text-center",colspan:"99",textContent:m(e.generalConfiguration.messages.withoutResults)},null,8,Dt)]))])])])]),t("div",It,[e.lists.admins.records.data&&e.lists.admins.records.data.length>0?(u(),c("nav",Et,[t("ul",Tt,[(u(!0),c(v,null,R(e.lists.admins.records.links,a=>(u(),c("li",{class:C(["page-item my-1",a.active?"active":a.url?"":"disabled"])},[t("a",{class:"page-link waves-effect me-1",href:"javascript:void(0);",onClick:b=>i.listAdmins({url:a.url}),innerHTML:a.label},null,8,Ot)],2))),256))])])):J("",!0)]),t("div",{class:"modal fade",id:e.forms.admins.add.modals.default,tabindex:"-1","aria-hidden":"true"},[t("div",qt,[t("div",kt,[St,t("div",Ut,[t("div",Rt,[r(p,{modelValue:e.forms.admins.add.data.type_document,"onUpdate:modelValue":s[3]||(s[3]=a=>e.forms.admins.add.data.type_document=a),options:e.forms.admins.add.options.type_document,showDiv:!0,title:"Tipo de documento",required:!0,showTextBottom:!0,textBottomInfo:(V=e.forms.admins.add.errors)==null?void 0:V.type_document,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","options","textBottomInfo"]),r(l,{modelValue:e.forms.admins.add.data.number_document,"onUpdate:modelValue":s[5]||(s[5]=a=>e.forms.admins.add.data.number_document=a),showDiv:!0,title:"Número de documento",required:!0,maxlength:25,showTextBottom:!0,textBottomInfo:(A=e.forms.admins.add.errors)==null?void 0:A.number_document,xl:6,lg:6,md:12,sm:12},{inputGroupAppend:w(()=>[t("button",{class:"btn btn-primary waves-effect",type:"button",disabled:!i.validateVariable({value:e.forms.admins.add.data.type_document})||!i.validateVariable({value:e.forms.admins.add.data.number_document}),onClick:s[4]||(s[4]=a=>i.consultNumberDocument({functionName:"createAdmin",numberDocument:e.forms.admins.add.data.number_document,type:e.forms.admins.add.data.type_document}))},Pt,8,Ft)]),_:1},8,["modelValue","textBottomInfo"])]),t("div",Mt,[r(l,{modelValue:e.forms.admins.add.data.last_name,"onUpdate:modelValue":s[6]||(s[6]=a=>e.forms.admins.add.data.last_name=a),showDiv:!0,title:"Apellidos",required:!0,maxlength:60,showTextBottom:!0,textBottomInfo:(D=e.forms.admins.add.errors)==null?void 0:D.last_name,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),r(l,{modelValue:e.forms.admins.add.data.first_name,"onUpdate:modelValue":s[7]||(s[7]=a=>e.forms.admins.add.data.first_name=a),showDiv:!0,title:"Nombres",required:!0,maxlength:80,showTextBottom:!0,textBottomInfo:(I=e.forms.admins.add.errors)==null?void 0:I.first_name,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"])]),t("div",Gt,[r(l,{modelValue:e.forms.admins.add.data.email,"onUpdate:modelValue":s[8]||(s[8]=a=>e.forms.admins.add.data.email=a),showDiv:!0,title:"Correo electrónico",required:!0,maxlength:60,showTextBottom:!0,textBottomInfo:(E=e.forms.admins.add.errors)==null?void 0:E.email,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),r(l,{modelValue:e.forms.admins.add.data.password,"onUpdate:modelValue":s[9]||(s[9]=a=>e.forms.admins.add.data.password=a),showDiv:!0,title:"Contraseña",required:!0,maxlength:80,showTextBottom:!0,textBottomInfo:(T=e.forms.admins.add.errors)==null?void 0:T.password,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"])]),t("div",jt,[r(F,{modelValue:e.forms.admins.add.data.birth_date,"onUpdate:modelValue":s[10]||(s[10]=a=>e.forms.admins.add.data.birth_date=a),showDiv:!0,title:"Fecha de nacimiento",required:!0,showTextBottom:!0,textBottomInfo:(O=e.forms.admins.add.errors)==null?void 0:O.birth_date,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),r(p,{modelValue:e.forms.admins.add.data.gender,"onUpdate:modelValue":s[11]||(s[11]=a=>e.forms.admins.add.data.gender=a),options:e.forms.admins.add.options.gender,showDiv:!0,title:"Género",required:!0,showTextBottom:!0,textBottomInfo:(N=e.forms.admins.add.errors)==null?void 0:N.gender,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","options","textBottomInfo"])]),t("div",zt,[r(l,{modelValue:e.forms.admins.add.data.phone,"onUpdate:modelValue":s[12]||(s[12]=a=>e.forms.admins.add.data.phone=a),showDiv:!0,title:"Celular",required:!0,maxlength:80,showTextBottom:!0,textBottomInfo:(q=e.forms.admins.add.errors)==null?void 0:q.phone,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),r(p,{modelValue:e.forms.admins.add.data.status,"onUpdate:modelValue":s[13]||(s[13]=a=>e.forms.admins.add.data.status=a),options:e.forms.admins.add.options.status,showDiv:!0,title:"Estado",required:!0,showTextBottom:!0,textBottomInfo:(k=e.forms.admins.add.errors)==null?void 0:k.status,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","options","textBottomInfo"])]),t("div",Ht,[r(L,{id:`${e.forms.admins.add.select2.branches}`,options:e.forms.admins.add.options.branches,showDiv:!0,title:"Sucursal",required:!0,showTextBottom:!0,textBottomInfo:(S=e.forms.admins.add.errors)==null?void 0:S.branches,xl:12,lg:12,md:12,sm:12},null,8,["id","options","textBottomInfo"])])]),t("div",Kt,[Jt,t("button",{type:"button",class:"btn btn-primary",onClick:s[14]||(s[14]=a=>i.createAdmin())},Xt)])])])],8,Nt)],64)}const Zt=P(X,[["render",Yt]]);Q(Zt).mount("#app");
