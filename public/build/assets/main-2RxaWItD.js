import{_ as A,i as E,a as S,b as q,c as g,g as I,s as x,t as u,h as v,v as T,r as w,o as i,e as c,f as t,j as d,w as y,F as b,k as B,l as m,m as F,n as C,p as N,q as V,u as D}from"./inputSelect-iyL7CFYm.js";import{a as k}from"./axios-OMshwncm.js";import{i as L}from"./inputSelect2-lGZPlumr.js";const P={components:{inputDate:E,inputText:S,inputSelect:q,inputSelect2:L},mounted:async function(){document.getElementById("menu-item-branches").classList.add("active"),await this.initParams({}),await this.initOthers({}),await this.listBranches({}),g()},data(){return{lists:{branches:{filters:{general:""},records:{total:0}}},forms:{branches:{add:{modals:{default:"addBranchModal"},select2:{},data:{name:"",location:"",status:""},options:{status:[{code:"active",label:"Activo"},{code:"inactive",label:"Inactivo"}]},errors:{}}}},generalConfiguration:I}},methods:{initParams({}){return new Promise(o=>{o(!0)})},initOthers({}){return new Promise(o=>{o(!0)})},listBranches({url:o=null}){return new Promise(s=>{x({type:"list"});let r=o||`${C}/branches/list`,n={},e={};e.general=this.lists.branches.filters.general,n.params=e,k.get(r,n).then(l=>{this.lists.branches.records=l.data}).catch(l=>{u({subtitle:l,type:"error"})}).finally(()=>{v(),g(),s(!0)})})},createBranch(){let o="createBranch";x({type:"saveForm"}),this.clearFormErrors({functionName:o});let s=`${C}/branches`,r={};r.name=this.forms.branches.add.data.name,r.location=this.forms.branches.add.data.location,r.status=this.forms.branches.add.data.status,k.post(s,r).then(n=>{switch(n.status){case 200:this.clearForm({functionName:o}),u({subtitle:n.data.message,type:"success"});break}}).catch(n=>{switch(n.response.status){case 422:this.setFormErrors({functionName:o,errors:n.response.data.errors}),u({code:n.response.status,type:"error"});break}}).finally(()=>{v()})},clearForm({functionName:o}){switch(o){case"createBranch":this.forms.branches.add.data.name="",this.forms.branches.add.data.location="",this.forms.branches.add.data.status="";break}},clearFormErrors({functionName:o}){switch(o){case"createBranch":let s=Object.keys(this.forms.branches.add.errors);for(const r of s)this.forms.branches.add.errors[r]=[];break}},setFormErrors({functionName:o,errors:s=[]}){switch(o){case"createBranch":this.forms.branches.add.errors.name=s.name??[],this.forms.branches.add.errors.location=s.location??[],this.forms.branches.add.errors.status=s.status??[];break}},validateVariable({value:o}){return T({value:o})}}},R=t("h4",{class:"py-2 mb-4"},[t("span",{class:"text-muted fw-light"},[t("i",{class:"fa fa-home fa-2xs"}),N(" / ")]),t("span",{class:"text-uppercase"}," SUCURSALES ")],-1),O={class:"d-flex flex-row mb-4"},j={class:"align-self-start"},G=t("i",{class:"fa fa-info-circle","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Búsqueda por: Nombre, Ubicación.",role:"button"},null,-1),M=t("i",{class:"fa fa-search"},null,-1),K=[M],z={class:"align-self-end ms-3"},H=["data-bs-target"],J=t("i",{class:"fa fa-plus"},null,-1),Q=t("span",{class:"ms-1"},"Agregar",-1),W=[J,Q],X={class:"card"},Y={class:"table-responsive text-nowrap"},Z={class:"table table-hover"},$=t("thead",{class:"table-light"},[t("tr",{class:"text-uppercase"},[t("th",{class:"align-middle text-center fw-bold col-1"},"NOMBRE"),t("th",{class:"align-middle text-center fw-bold col-1"},"UBICACIÓN"),t("th",{class:"align-middle text-center fw-bold col-1"},"ESTADO")])],-1),tt={class:"table-border-bottom-0"},st=["textContent"],et=["textContent"],at={class:"text-center"},ot=["textContent"],nt={key:1},rt=["textContent"],lt={class:"d-flex justify-content-center"},it={key:0,"aria-label":"Page navigation",class:"mt-3"},ct={class:"pagination d-flex flex-wrap"},dt=["onClick","innerHTML"],mt=["id"],ht={class:"modal-dialog modal-dialog-centered",role:"document"},ut={class:"modal-content"},bt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title text-uppercase"},"AGREGAR SUCURSAL"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ft={class:"modal-body"},pt={class:"row g-2 mb-3"},_t={class:"row g-2 mb-3"},gt={class:"modal-footer"},xt=t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"Cerrar",-1),vt=t("i",{class:"fa fa-save"},null,-1),wt=t("span",{class:"ms-1"},"Guardar",-1),yt=[vt,wt];function Bt(o,s,r,n,e,l){var f,p,_;const h=w("inputText"),U=w("inputSelect");return i(),c(b,null,[R,t("div",O,[t("div",j,[d(h,{modelValue:e.lists.branches.filters.general,"onUpdate:modelValue":s[1]||(s[1]=a=>e.lists.branches.filters.general=a),showDiv:!0,title:"Buscar",titleClass:["fw-bold","colon-at-end","ms-1"],placeholder:"Ingrese la búsqueda",onEnterKeyPressed:s[2]||(s[2]=a=>l.listBranches({}))},{default:y(()=>[G]),inputGroupAppend:y(()=>[t("button",{class:"btn btn-primary waves-effect",type:"button",onClick:s[0]||(s[0]=a=>l.listBranches({}))},K)]),_:1},8,["modelValue"])]),t("div",z,[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":`#${e.forms.branches.add.modals.default}`},W,8,H)])]),t("div",X,[t("div",Y,[t("table",Z,[$,t("tbody",tt,[e.lists.branches.records.data&&e.lists.branches.records.data.length>0?(i(!0),c(b,{key:0},B(e.lists.branches.records.data,a=>(i(),c("tr",{key:a.id,class:"align-middle"},[t("td",{class:"text-center",textContent:m(a.name)},null,8,st),t("td",{class:"text-center",textContent:m(a.location)},null,8,et),t("td",at,[t("span",{class:V(["badge","text-capitalize",{"bg-label-success":["active"].includes(a.status),"bg-label-danger":["inactive"].includes(a.status)}]),textContent:m(a.formatted_status)},null,10,ot)])]))),128)):(i(),c("tr",nt,[t("td",{class:"text-center",colspan:"99",textContent:m(e.generalConfiguration.messages.withoutResults)},null,8,rt)]))])])])]),t("div",lt,[e.lists.branches.records.data&&e.lists.branches.records.data.length>0?(i(),c("nav",it,[t("ul",ct,[(i(!0),c(b,null,B(e.lists.branches.records.links,a=>(i(),c("li",{class:V(["page-item my-1",a.active?"active":a.url?"":"disabled"])},[t("a",{class:"page-link waves-effect me-1",href:"javascript:void(0);",onClick:Vt=>l.listBranches({url:a.url}),innerHTML:a.label},null,8,dt)],2))),256))])])):F("",!0)]),t("div",{class:"modal fade",id:e.forms.branches.add.modals.default,tabindex:"-1","aria-hidden":"true"},[t("div",ht,[t("div",ut,[bt,t("div",ft,[t("div",pt,[d(h,{modelValue:e.forms.branches.add.data.name,"onUpdate:modelValue":s[3]||(s[3]=a=>e.forms.branches.add.data.name=a),showDiv:!0,title:"Nombre",required:!0,maxlength:60,showTextBottom:!0,textBottomInfo:(f=e.forms.branches.add.errors)==null?void 0:f.name,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),d(h,{modelValue:e.forms.branches.add.data.location,"onUpdate:modelValue":s[4]||(s[4]=a=>e.forms.branches.add.data.location=a),showDiv:!0,title:"Ubicación",required:!0,maxlength:80,showTextBottom:!0,textBottomInfo:(p=e.forms.branches.add.errors)==null?void 0:p.location,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"])]),t("div",_t,[d(U,{modelValue:e.forms.branches.add.data.status,"onUpdate:modelValue":s[5]||(s[5]=a=>e.forms.branches.add.data.status=a),options:e.forms.branches.add.options.status,showDiv:!0,title:"Estado",required:!0,showTextBottom:!0,textBottomInfo:(_=e.forms.branches.add.errors)==null?void 0:_.status,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","options","textBottomInfo"])])]),t("div",gt,[xt,t("button",{type:"button",class:"btn btn-primary",onClick:s[6]||(s[6]=a=>l.createBranch())},yt)])])])],8,mt)],64)}const Ct=A(P,[["render",Bt]]);D(Ct).mount("#app");
