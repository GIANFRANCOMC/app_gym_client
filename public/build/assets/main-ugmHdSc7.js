import{_ as R,i as S,a as M,b as P,c as O,g as G,s as p,t as b,h as x,v as j,d as z,r as g,o as u,e as c,f as t,j as m,w,F as v,k as U,l as i,m as H,n as A,p as f,q as C,u as K}from"./inputSelect-iyL7CFYm.js";import{a as F}from"./axios-OMshwncm.js";import{i as J}from"./inputSelect2-lGZPlumr.js";const Q={components:{inputDate:S,inputText:M,inputSelect:P,inputSelect2:J},mounted:async function(){document.getElementById("menu-item-customers").classList.add("active"),await this.initParams({}),await this.initOthers({}),await this.listCustomers({}),O()},data(){return{lists:{customers:{filters:{general:""},records:{total:0}}},forms:{customers:{add:{modals:{default:"addCustomerModal"},select2:{},data:{type_document:"",number_document:"",last_name:"",first_name:"",email:"",password:"",birth_date:"",gender:"",phone:"",status:""},options:{type_document:[{code:"dni",label:"DNI"}],gender:[{code:"male",label:"Masculino"},{code:"female",label:"Femenino"},{code:"other",label:"Otro"}],status:[{code:"active",label:"Activo"},{code:"inactive",label:"Inactivo"}]},errors:{}}}},generalConfiguration:G}},methods:{initParams({}){return new Promise(a=>{a(!0)})},initOthers({}){return new Promise(a=>{a(!0)})},listCustomers({url:a=null}){return new Promise(s=>{p({type:"list"});let r=a||`${A}/customers/list`,l={},e={};e.general=this.lists.customers.filters.general,l.params=e,F.get(r,l).then(d=>{this.lists.customers.records=d.data}).catch(d=>{b({subtitle:d,type:"error"})}).finally(()=>{x(),O(),s(!0)})})},createCustomer(){let a="createCustomer";p({type:"saveForm"}),this.clearFormErrors({functionName:a});let s=`${A}/customers`,r={};r.type_document=this.forms.customers.add.data.type_document,r.number_document=this.forms.customers.add.data.number_document,r.last_name=this.forms.customers.add.data.last_name,r.first_name=this.forms.customers.add.data.first_name,r.email=this.forms.customers.add.data.email,r.password=this.forms.customers.add.data.password,r.birth_date=this.forms.customers.add.data.birth_date,r.gender=this.forms.customers.add.data.gender,r.phone=this.forms.customers.add.data.phone,r.status=this.forms.customers.add.data.status,F.post(s,r).then(l=>{switch(l.status){case 200:this.clearForm({functionName:a}),b({subtitle:l.data.message,type:"success"});break}}).catch(l=>{switch(l.response.status){case 422:this.setFormErrors({functionName:a,errors:l.response.data.errors}),b({code:l.response.status,type:"error"});break}}).finally(()=>{x()})},clearForm({functionName:a}){switch(a){case"createCustomer":this.forms.customers.add.data.type_document="",this.forms.customers.add.data.number_document="",this.forms.customers.add.data.last_name="",this.forms.customers.add.data.first_name="",this.forms.customers.add.data.email="",this.forms.customers.add.data.password="",this.forms.customers.add.data.birth_date="",this.forms.customers.add.data.gender="",this.forms.customers.add.data.phone="",this.forms.customers.add.data.status="";break}},clearFormErrors({functionName:a}){switch(a){case"createCustomer":let s=Object.keys(this.forms.customers.add.errors);for(const r of s)this.forms.customers.add.errors[r]=[];break}},setFormErrors({functionName:a,errors:s=[]}){switch(a){case"createCustomer":this.forms.customers.add.errors.type_document=s.type_document??[],this.forms.customers.add.errors.number_document=s.number_document??[],this.forms.customers.add.errors.last_name=s.last_name??[],this.forms.customers.add.errors.first_name=s.first_name??[],this.forms.customers.add.errors.email=s.email??[],this.forms.customers.add.errors.password=s.password??[],this.forms.customers.add.errors.birth_date=s.birth_date??[],this.forms.customers.add.errors.gender=s.gender??[],this.forms.customers.add.errors.phone=s.phone??[],this.forms.customers.add.errors.status=s.status??[];break}},validateVariable({value:a}){return j({value:a})},async consultNumberDocument({functionName:a,numberDocument:s,type:r}){var l,e,d;switch(a){case"createCustomer":p({type:"externalConsult"});let n=await z({numberDocument:s,type:r});n.bool&&(this.forms.customers.add.data.number_document=(l=n.data)==null?void 0:l.number_document,this.forms.customers.add.data.last_name=(e=n.data)==null?void 0:e.last_name,this.forms.customers.add.data.first_name=(d=n.data)==null?void 0:d.first_name),x();break}}}},W=t("h4",{class:"py-2 mb-4"},[t("span",{class:"text-muted fw-light"},[t("i",{class:"fa fa-home fa-2xs"}),f(" / ")]),t("span",{class:"text-uppercase"}," CLIENTES ")],-1),X={class:"d-flex flex-row mb-4"},Y={class:"align-self-start"},Z=t("i",{class:"fa fa-info-circle","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Búsqueda por: Número de documento, Apellidos, Nombres.",role:"button"},null,-1),$=t("i",{class:"fa fa-search"},null,-1),tt=[$],et={class:"align-self-end ms-3"},st=["data-bs-target"],ot=t("i",{class:"fa fa-plus"},null,-1),at=t("span",{class:"ms-1"},"Agregar",-1),rt=[ot,at],dt={class:"card"},lt={class:"table-responsive text-nowrap"},nt={class:"table table-hover"},mt=t("thead",{class:"table-light"},[t("tr",{class:"text-uppercase"},[t("th",{class:"align-middle text-center fw-bold col-1"},[f("TIPO DE"),t("br"),f("DOCUMENTO")]),t("th",{class:"align-middle text-center fw-bold col-1"},[f("NÚMERO DE"),t("br"),f("DOCUMENTO")]),t("th",{class:"align-middle text-center fw-bold col-2"},"APELLIDOS"),t("th",{class:"align-middle text-center fw-bold col-2"},"NOMBRES"),t("th",{class:"align-middle text-center fw-bold col-1"},[f("CORREO"),t("br"),f("ELECTRÓNICO")]),t("th",{class:"align-middle text-center fw-bold col-1",colspan:"2"},"FECHA DE NACIMIENTO"),t("th",{class:"align-middle text-center fw-bold col-1"},"GÉNERO"),t("th",{class:"align-middle text-center fw-bold col-1"},"ESTADO")])],-1),it={class:"table-border-bottom-0"},ut=["textContent"],ct=["textContent"],ft=["textContent"],ht=["textContent"],_t=["textContent"],pt=["textContent"],bt={class:"text-start"},xt={class:"badge rounded-pill bg-label-info"},gt={class:"text-center"},wt=["textContent"],vt={class:"text-center"},Ct=["textContent"],yt={key:1},Vt=["textContent"],Bt={class:"d-flex justify-content-center"},It={key:0,"aria-label":"Page navigation",class:"mt-3"},Dt={class:"pagination d-flex flex-wrap"},Et=["onClick","innerHTML"],Tt=["id"],Nt={class:"modal-dialog modal-dialog-centered",role:"document"},kt={class:"modal-content"},qt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title text-uppercase"},"AGREGAR CLIENTE"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ot={class:"modal-body"},Ut={class:"row g-2 mb-3"},At=["disabled"],Ft=t("i",{class:"fa fa-search"},null,-1),Lt=[Ft],Rt={class:"row g-2 mb-3"},St={class:"row g-2 mb-3"},Mt={class:"row g-2 mb-3"},Pt={class:"row g-2 mb-3"},Gt={class:"modal-footer"},jt=t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"Cerrar",-1),zt=t("i",{class:"fa fa-save"},null,-1),Ht=t("span",{class:"ms-1"},"Guardar",-1),Kt=[zt,Ht];function Jt(a,s,r,l,e,d){var y,V,B,I,D,E,T,N,k,q;const n=g("inputText"),h=g("inputSelect"),L=g("inputDate");return u(),c(v,null,[W,t("div",X,[t("div",Y,[m(n,{modelValue:e.lists.customers.filters.general,"onUpdate:modelValue":s[1]||(s[1]=o=>e.lists.customers.filters.general=o),showDiv:!0,title:"Buscar",titleClass:["fw-bold","colon-at-end","ms-1"],placeholder:"Ingrese la búsqueda",onEnterKeyPressed:s[2]||(s[2]=o=>d.listCustomers({}))},{default:w(()=>[Z]),inputGroupAppend:w(()=>[t("button",{class:"btn btn-primary waves-effect",type:"button",onClick:s[0]||(s[0]=o=>d.listCustomers({}))},tt)]),_:1},8,["modelValue"])]),t("div",et,[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":`#${e.forms.customers.add.modals.default}`},rt,8,st)])]),t("div",dt,[t("div",lt,[t("table",nt,[mt,t("tbody",it,[e.lists.customers.records.data&&e.lists.customers.records.data.length>0?(u(!0),c(v,{key:0},U(e.lists.customers.records.data,o=>{var _;return u(),c("tr",{key:o.id,class:"align-middle"},[t("td",{class:"text-center text-uppercase",textContent:i(o.formatted_type_document)},null,8,ut),t("td",{class:"text-center",textContent:i(o.number_document)},null,8,ct),t("td",{class:"text-center",textContent:i(o.last_name)},null,8,ft),t("td",{class:"text-center",textContent:i(o.first_name)},null,8,ht),t("td",{class:"text-center",textContent:i((_=o==null?void 0:o.customerUser)==null?void 0:_.email)},null,8,_t),t("td",{class:"text-center",textContent:i(o.formatted_birth_date)},null,8,pt),t("td",bt,[t("span",xt,i(o.age)+" años",1)]),t("td",gt,[t("i",{class:C(["fa",{"fa-male text-info":["male"].includes(o.gender),"fa-female text-danger":["female"].includes(o.gender),"fa-person-half-dress text-warning":["other"].includes(o.gender)}])},null,2),t("span",{textContent:i(o.formatted_gender),class:"text-capitalize ms-1"},null,8,wt)]),t("td",vt,[t("span",{class:C(["badge","text-capitalize",{"bg-label-success":["active"].includes(o.status),"bg-label-danger":["inactive"].includes(o.status)}]),textContent:i(o.formatted_status)},null,10,Ct)])])}),128)):(u(),c("tr",yt,[t("td",{class:"text-center",colspan:"99",textContent:i(e.generalConfiguration.messages.withoutResults)},null,8,Vt)]))])])])]),t("div",Bt,[e.lists.customers.records.data&&e.lists.customers.records.data.length>0?(u(),c("nav",It,[t("ul",Dt,[(u(!0),c(v,null,U(e.lists.customers.records.links,o=>(u(),c("li",{class:C(["page-item my-1",o.active?"active":o.url?"":"disabled"])},[t("a",{class:"page-link waves-effect me-1",href:"javascript:void(0);",onClick:_=>d.listCustomers({url:o.url}),innerHTML:o.label},null,8,Et)],2))),256))])])):H("",!0)]),t("div",{class:"modal fade",id:e.forms.customers.add.modals.default,tabindex:"-1","aria-hidden":"true"},[t("div",Nt,[t("div",kt,[qt,t("div",Ot,[t("div",Ut,[m(h,{modelValue:e.forms.customers.add.data.type_document,"onUpdate:modelValue":s[3]||(s[3]=o=>e.forms.customers.add.data.type_document=o),options:e.forms.customers.add.options.type_document,showDiv:!0,title:"Tipo de documento",required:!0,showTextBottom:!0,textBottomInfo:(y=e.forms.customers.add.errors)==null?void 0:y.type_document,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","options","textBottomInfo"]),m(n,{modelValue:e.forms.customers.add.data.number_document,"onUpdate:modelValue":s[5]||(s[5]=o=>e.forms.customers.add.data.number_document=o),showDiv:!0,title:"Número de documento",required:!0,maxlength:25,showTextBottom:!0,textBottomInfo:(V=e.forms.customers.add.errors)==null?void 0:V.number_document,xl:6,lg:6,md:12,sm:12},{inputGroupAppend:w(()=>[t("button",{class:"btn btn-primary waves-effect",type:"button",disabled:!d.validateVariable({value:e.forms.customers.add.data.type_document})||!d.validateVariable({value:e.forms.customers.add.data.number_document}),onClick:s[4]||(s[4]=o=>d.consultNumberDocument({functionName:"createCustomer",numberDocument:e.forms.customers.add.data.number_document,type:e.forms.customers.add.data.type_document}))},Lt,8,At)]),_:1},8,["modelValue","textBottomInfo"])]),t("div",Rt,[m(n,{modelValue:e.forms.customers.add.data.last_name,"onUpdate:modelValue":s[6]||(s[6]=o=>e.forms.customers.add.data.last_name=o),showDiv:!0,title:"Apellidos",required:!0,maxlength:60,showTextBottom:!0,textBottomInfo:(B=e.forms.customers.add.errors)==null?void 0:B.last_name,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),m(n,{modelValue:e.forms.customers.add.data.first_name,"onUpdate:modelValue":s[7]||(s[7]=o=>e.forms.customers.add.data.first_name=o),showDiv:!0,title:"Nombres",required:!0,maxlength:80,showTextBottom:!0,textBottomInfo:(I=e.forms.customers.add.errors)==null?void 0:I.first_name,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"])]),t("div",St,[m(n,{modelValue:e.forms.customers.add.data.email,"onUpdate:modelValue":s[8]||(s[8]=o=>e.forms.customers.add.data.email=o),showDiv:!0,title:"Correo electrónico",required:!0,maxlength:60,showTextBottom:!0,textBottomInfo:(D=e.forms.customers.add.errors)==null?void 0:D.email,xl:12,lg:12,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),m(n,{modelValue:e.forms.customers.add.data.password,"onUpdate:modelValue":s[9]||(s[9]=o=>e.forms.customers.add.data.password=o),showDiv:!0,divClass:["d-none"],title:"Contraseña",required:!0,maxlength:80,showTextBottom:!0,textBottomInfo:(E=e.forms.customers.add.errors)==null?void 0:E.password,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"])]),t("div",Mt,[m(L,{modelValue:e.forms.customers.add.data.birth_date,"onUpdate:modelValue":s[10]||(s[10]=o=>e.forms.customers.add.data.birth_date=o),showDiv:!0,title:"Fecha de nacimiento",required:!0,showTextBottom:!0,textBottomInfo:(T=e.forms.customers.add.errors)==null?void 0:T.birth_date,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),m(h,{modelValue:e.forms.customers.add.data.gender,"onUpdate:modelValue":s[11]||(s[11]=o=>e.forms.customers.add.data.gender=o),options:e.forms.customers.add.options.gender,showDiv:!0,title:"Género",required:!0,showTextBottom:!0,textBottomInfo:(N=e.forms.customers.add.errors)==null?void 0:N.gender,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","options","textBottomInfo"])]),t("div",Pt,[m(n,{modelValue:e.forms.customers.add.data.phone,"onUpdate:modelValue":s[12]||(s[12]=o=>e.forms.customers.add.data.phone=o),showDiv:!0,title:"Celular",required:!0,maxlength:80,showTextBottom:!0,textBottomInfo:(k=e.forms.customers.add.errors)==null?void 0:k.phone,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","textBottomInfo"]),m(h,{modelValue:e.forms.customers.add.data.status,"onUpdate:modelValue":s[13]||(s[13]=o=>e.forms.customers.add.data.status=o),options:e.forms.customers.add.options.status,showDiv:!0,title:"Estado",required:!0,showTextBottom:!0,textBottomInfo:(q=e.forms.customers.add.errors)==null?void 0:q.status,xl:6,lg:6,md:12,sm:12},null,8,["modelValue","options","textBottomInfo"])])]),t("div",Gt,[jt,t("button",{type:"button",class:"btn btn-primary",onClick:s[14]||(s[14]=o=>d.createCustomer())},Kt)])])])],8,Tt)],64)}const Qt=R(Q,[["render",Jt]]);K(Qt).mount("#app");
